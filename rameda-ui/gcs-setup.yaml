# GCS Bucket and CDN Configuration for Rameda UI
# This file contains the infrastructure setup commands and configurations

# Environment Variables
PROJECT_ID: rameda-465221
GCS_BUCKET: rameda-ui-static
REGION: europe-west3
DOMAINS:
  - rameda.pro
  - www.rameda.pro

# GCS Bucket Configuration
bucket_config:
  name: rameda-ui-static
  location: europe-west3
  storage_class: STANDARD
  website:
    main_page_suffix: index.html
    not_found_page: index.html
  public_access: true
  
# Cache Control Headers
cache_headers:
  # Long cache for static assets (1 year)
  static_assets:
    pattern: "**/*.{js,css,png,jpg,jpeg,gif,svg,woff,woff2,ttf,eot,ico}"
    cache_control: "public, max-age=31536000, immutable"
  
  # Short cache for HTML files (5 minutes)
  html_files:
    pattern: "**/*.html"
    cache_control: "public, max-age=300, must-revalidate"
  
  # No cache for index.html
  index_file:
    pattern: "index.html"
    cache_control: "no-cache, no-store, must-revalidate"
  
  # JSON files cache (5 minutes)
  json_files:
    pattern: "**/*.{json,xml,txt}"
    cache_control: "public, max-age=300"

# CDN Configuration
cdn_config:
  backend_bucket: rameda-ui-backend
  url_map: rameda-ui-lb
  ssl_certificate: rameda-ui-ssl
  https_proxy: rameda-ui-https-proxy
  forwarding_rule: rameda-ui-https-forwarding-rule
  
# Security Headers
security_headers:
  - "X-Frame-Options: SAMEORIGIN"
  - "X-Content-Type-Options: nosniff"
  - "X-XSS-Protection: 1; mode=block"
  - "Referrer-Policy: strict-origin-when-cross-origin"
  - "Content-Security-Policy: default-src 'self' https://api.rameda.pro; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:;"

# CORS Configuration
cors_config:
  allowed_origins:
    - "https://rameda.pro"
    - "https://www.rameda.pro"
    - "https://api.rameda.pro"
  allowed_methods:
    - "GET"
    - "HEAD"
    - "OPTIONS"
  allowed_headers:
    - "Content-Type"
    - "Authorization"
    - "X-Requested-With"
  max_age: 86400 